# ä¸­æ–‡å­—ä½“æ—¶åºé—®é¢˜ä¿®å¤ - å½»åº•è§£å†³æ–¹å—é—ªç°

## ğŸ¯ é—®é¢˜æè¿°

**ç°è±¡ï¼š**
- ä¸ç®¡æ˜¯ç¬¬ä¸€æ¬¡å¯åŠ¨é¡¹ç›®è¿˜æ˜¯åˆ·æ–°é¡µé¢
- åŠ è½½åŠ¨ç”»æ¶ˆå¤±åï¼Œ**ç«‹å³æ˜¾ç¤ºæ–¹å—**ï¼ˆâ–¡â–¡â–¡ï¼‰
- éœ€è¦**ç­‰å¾…å‡ ç™¾æ¯«ç§’**æ‰æ˜¾ç¤ºæ­£å¸¸çš„ä¸­æ–‡

**æ ¹æœ¬åŸå› ï¼š**
```
å½“å‰æµç¨‹ï¼ˆé”™è¯¯ï¼‰ï¼š
åŠ è½½åŠ¨ç”»æ¶ˆå¤± â†’ Flutterå†…å®¹æ˜¾ç¤ºï¼ˆæ–¹å—ï¼‰ â†’ å­—ä½“åŠ è½½å®Œæˆ â†’ ä¸­æ–‡æ­£å¸¸

æœŸæœ›æµç¨‹ï¼ˆæ­£ç¡®ï¼‰ï¼š
åŠ è½½åŠ¨ç”»æ˜¾ç¤º â†’ å­—ä½“åŠ è½½å®Œæˆ â†’ Flutterå†…å®¹æ˜¾ç¤º â†’ ç›´æ¥æ˜¾ç¤ºä¸­æ–‡
```

---

## ğŸ”§ è§£å†³æ–¹æ¡ˆ

### 1. **ä½¿ç”¨ `display: none !important` å®Œå…¨éšè— Flutter**

**ä¹‹å‰ï¼ˆé”™è¯¯ï¼‰ï¼š**
```css
body.fonts-loading #flutter-app {
  visibility: hidden;  /* âŒ å¯èƒ½è¢« Flutter æ ·å¼è¦†ç›– */
  opacity: 0;
}
```

**ç°åœ¨ï¼ˆæ­£ç¡®ï¼‰ï¼š**
```css
body.fonts-loading #flutter-app {
  display: none !important;  /* âœ… å¼ºåˆ¶éšè—ï¼Œä¸å¯è¦†ç›– */
}

body.fonts-loaded #flutter-app {
  display: block !important;  /* âœ… å­—ä½“åŠ è½½åæ˜¾ç¤º */
  animation: fadeIn 0.3s ease-in;
}
```

**æ•ˆæœï¼š**
- å­—ä½“æœªåŠ è½½å®Œæˆæ—¶ï¼ŒFlutter å†…å®¹**å®Œå…¨ä¸æ¸²æŸ“**
- é¿å…ä»»ä½•æ–¹å—é—ªç°çš„å¯èƒ½æ€§

---

### 2. **å»¶è¿Ÿæ˜¾ç¤ºæ—¶æœºï¼Œç¡®ä¿å­—ä½“å®Œå…¨åº”ç”¨**

**ä¹‹å‰ï¼ˆé”™è¯¯ï¼‰ï¼š**
```javascript
if (flutterLoaded && fontsLoaded) {
  // ç«‹å³æ˜¾ç¤º â†’ å¯èƒ½å­—ä½“è¿˜æœªåº”ç”¨åˆ° DOM
  loading.remove();
}
```

**ç°åœ¨ï¼ˆæ­£ç¡®ï¼‰ï¼š**
```javascript
if (flutterLoaded && fontsLoaded) {
  console.log('âœ… Flutter å’Œå­—ä½“éƒ½å·²å°±ç»ªï¼Œå‡†å¤‡æ˜¾ç¤ºåº”ç”¨...');
  
  // å»¶è¿Ÿ 200ms æ˜¾ç¤ºï¼Œç¡®ä¿å­—ä½“å®Œå…¨åº”ç”¨åˆ° DOM
  setTimeout(function() {
    document.body.classList.remove('fonts-loading');
    document.body.classList.add('fonts-loaded');  // â† ç§»é™¤ display: none
    
    // å†å»¶è¿Ÿ 100ms ç§»é™¤åŠ è½½é®ç½©
    setTimeout(function() {
      loading.remove();
    }, 100);
  }, 200);
}
```

**æ—¶åºæ§åˆ¶ï¼š**
```
å­—ä½“åŠ è½½å®Œæˆ â†’ ç­‰å¾… 200ms â†’ æ˜¾ç¤º Flutter å†…å®¹ â†’ ç­‰å¾… 100ms â†’ ç§»é™¤åŠ è½½é®ç½©
```

---

### 3. **å¢å¼ºå­—ä½“é¢„åŠ è½½**

```html
<!-- é¢„åŠ è½½å…³é”®å­—ä½“æ–‡ä»¶ï¼Œæé«˜åŠ è½½ä¼˜å…ˆçº§ -->
<link rel="preload" as="style" 
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=block">
```

**æ•ˆæœï¼š**
- æµè§ˆå™¨ä¼˜å…ˆä¸‹è½½å­—ä½“æ–‡ä»¶
- å‡å°‘ç­‰å¾…æ—¶é—´

---

### 4. **å¢å¼ºè°ƒè¯•æ—¥å¿—**

```javascript
console.log('âœ… Flutter å’Œå­—ä½“éƒ½å·²å°±ç»ªï¼Œå‡†å¤‡æ˜¾ç¤ºåº”ç”¨...');
console.log('ğŸ¨ ç§»é™¤ fonts-loadingï¼Œæ·»åŠ  fonts-loaded');
console.log('âœ¨ ç§»é™¤åŠ è½½é®ç½©');
console.warn('â±ï¸ åŠ è½½è¶…æ—¶ï¼ˆ8ç§’ï¼‰ï¼Œå¼ºåˆ¶æ˜¾ç¤ºåº”ç”¨');
console.warn('çŠ¶æ€: flutterLoaded=' + flutterLoaded + ', fontsLoaded=' + fontsLoaded);
```

**ç”¨é€”ï¼š**
- ä¾¿äºåœ¨ Console ä¸­è¿½è¸ªåŠ è½½è¿‡ç¨‹
- å¿«é€Ÿå®šä½é—®é¢˜

---

## ğŸ§ª æµ‹è¯•æ–¹æ³•

### 1. **æ¸…é™¤ç¼“å­˜æµ‹è¯•**

```bash
# 1. åœæ­¢å½“å‰é¡¹ç›®
Ctrl + C

# 2. æ¸…ç†æ„å»ºäº§ç‰©
cd /Users/charles/Documents/2-WorkSpace/1-Project/cursorflutter/nanobamboo
flutter clean

# 3. é‡æ–°æ„å»º
flutter pub get

# 4. å¯åŠ¨é¡¹ç›®
flutter run -d chrome --web-port=3000
```

### 2. **æµè§ˆå™¨ç¡¬åˆ·æ–°æµ‹è¯•**

- æ‰“å¼€ `http://localhost:3000`
- æŒ‰ `Cmd + Shift + R`ï¼ˆmacOSï¼‰æˆ– `Ctrl + Shift + R`ï¼ˆWindowsï¼‰
- è§‚å¯Ÿæ˜¯å¦è¿˜æœ‰æ–¹å—é—ªç°

### 3. **Console æ—¥å¿—è§‚å¯Ÿ**

æ‰“å¼€ Chrome DevTools â†’ Consoleï¼ŒæŸ¥çœ‹æ—¥å¿—ï¼š

```
âœ… å­—ä½“é¢„åŠ è½½å®Œæˆ (Google Fonts)
âœ… æ‰€æœ‰å­—ä½“åŠ è½½å®Œæˆ
âœ… Flutter åˆå§‹åŒ–å®Œæˆ
âœ… Flutter å’Œå­—ä½“éƒ½å·²å°±ç»ªï¼Œå‡†å¤‡æ˜¾ç¤ºåº”ç”¨...
ğŸ¨ ç§»é™¤ fonts-loadingï¼Œæ·»åŠ  fonts-loaded
âœ¨ ç§»é™¤åŠ è½½é®ç½©
```

**å¦‚æœçœ‹åˆ°è¿™ä¸ªé¡ºåºï¼Œè¯´æ˜ä¿®å¤æˆåŠŸï¼**

### 4. **æ…¢é€Ÿç½‘ç»œæµ‹è¯•**

- æ‰“å¼€ Chrome DevTools â†’ Network
- é€‰æ‹© "Slow 3G" æˆ– "Fast 3G"
- åˆ·æ–°é¡µé¢
- è§‚å¯ŸåŠ è½½é®ç½©æ˜¯å¦ä¸€ç›´æ˜¾ç¤ºåˆ°ä¸­æ–‡å®Œå…¨å‡†å¤‡å¥½

---

## ğŸ“Š æŠ€æœ¯åŸç†

### æ ¸å¿ƒç­–ç•¥ï¼š**é˜»å¡å¼æ¸²æŸ“**

1. **HTML åŠ è½½** â†’ `<body class="fonts-loading">`
2. **CSS è§„åˆ™ç”Ÿæ•ˆ** â†’ `#flutter-app { display: none !important; }`
3. **Flutter åˆå§‹åŒ–** â†’ å†…å®¹å·²æ¸²æŸ“ï¼Œä½†è¢« CSS éšè—
4. **å­—ä½“åŠ è½½å®Œæˆ** â†’ `document.fonts.ready` è§¦å‘
5. **å»¶è¿Ÿ 200ms** â†’ ç¡®ä¿å­—ä½“åº”ç”¨åˆ° DOM
6. **ç§»é™¤ `fonts-loading`** â†’ `display: none` å¤±æ•ˆï¼Œå†…å®¹æ˜¾ç¤º
7. **å»¶è¿Ÿ 100ms** â†’ ç¡®ä¿ Flutter å†…å®¹å·²æ¸²æŸ“
8. **ç§»é™¤åŠ è½½é®ç½©** â†’ ç”¨æˆ·çœ‹åˆ°å®Œæ•´é¡µé¢

### æ—¶é—´çº¿ï¼š

```
0ms       : é¡µé¢å¼€å§‹åŠ è½½
100ms     : HTML + CSS åŠ è½½å®Œæˆ
500ms     : Flutter åˆå§‹åŒ–å®Œæˆï¼ˆä½†è¢«éšè—ï¼‰
1000ms    : Google Fonts åŠ è½½å®Œæˆ
1200ms    : å»¶è¿Ÿ 200ms åï¼Œæ˜¾ç¤º Flutter å†…å®¹
1300ms    : å»¶è¿Ÿ 100ms åï¼Œç§»é™¤åŠ è½½é®ç½©
âœ… ç”¨æˆ·çœ‹åˆ°ï¼šç›´æ¥æ˜¾ç¤ºæ­£ç¡®çš„ä¸­æ–‡ï¼Œæ— æ–¹å—é—ªç°ï¼
```

---

## âœ… é¢„æœŸæ•ˆæœ

### ä¿®å¤å‰ï¼š
```
ğŸ”„ åŠ è½½åŠ¨ç”»...
â¬œ â–¡â–¡â–¡â–¡â–¡â–¡ (æ–¹å—é—ªç° 300-500ms)
âœ… ç”¨AIæ™ºèƒ½è½¬æ¢æ‚¨çš„å›¾ç‰‡
```

### ä¿®å¤åï¼š
```
ğŸ”„ åŠ è½½åŠ¨ç”»...
âœ… ç”¨AIæ™ºèƒ½è½¬æ¢æ‚¨çš„å›¾ç‰‡ (ç›´æ¥æ˜¾ç¤ºæ­£ç¡®ä¸­æ–‡)
```

---

## ğŸ” æ•…éšœæ’æŸ¥

### å¦‚æœè¿˜æ˜¯çœ‹åˆ°æ–¹å—ï¼š

1. **æ£€æŸ¥ Console æ—¥å¿—**
   - æ˜¯å¦æœ‰ `âœ… æ‰€æœ‰å­—ä½“åŠ è½½å®Œæˆ`ï¼Ÿ
   - æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯ï¼Ÿ

2. **æ£€æŸ¥ Network é¢æ¿**
   - Google Fonts æ˜¯å¦åŠ è½½æˆåŠŸï¼ˆçŠ¶æ€ç  200ï¼‰ï¼Ÿ
   - å­—ä½“æ–‡ä»¶æ˜¯å¦è¢«æµè§ˆå™¨ç¼“å­˜ï¼Ÿ

3. **æ£€æŸ¥ Elements é¢æ¿**
   - `<body>` æ˜¯å¦æœ‰ `fonts-loaded` classï¼Ÿ
   - `#flutter-app` çš„ computed style æ˜¯å¦ä¸º `display: block`ï¼Ÿ

4. **å¼ºåˆ¶æ¸…é™¤ç¼“å­˜**
   ```bash
   # æµè§ˆå™¨
   Cmd + Shift + Delete â†’ æ¸…é™¤ç¼“å­˜

   # Flutter
   flutter clean
   rm -rf build/
   flutter pub get
   ```

---

## ğŸ“ æ€»ç»“

### æ ¸å¿ƒæ”¹åŠ¨ï¼š

| æ–‡ä»¶ | æ”¹åŠ¨å†…å®¹ | æ•ˆæœ |
|------|---------|------|
| `web/index.html` | æ·»åŠ  `<link rel="preload">` | æé«˜å­—ä½“åŠ è½½ä¼˜å…ˆçº§ |
| `web/index.html` | CSS: `display: none !important` | å¼ºåˆ¶éšè— Flutter å†…å®¹ |
| `web/index.html` | JS: å»¶è¿Ÿ 200ms + 100ms æ˜¾ç¤º | ç¡®ä¿å­—ä½“å®Œå…¨åº”ç”¨ |
| `web/index.html` | JS: å¢å¼ºè°ƒè¯•æ—¥å¿— | ä¾¿äºè¿½è¸ªåŠ è½½è¿‡ç¨‹ |

### æœ€ç»ˆæ•ˆæœï¼š

âœ… **å½»åº•æ¶ˆé™¤æ–¹å—é—ªç°**
âœ… **åŠ è½½åŠ¨ç”»ç»“æŸåï¼Œç›´æ¥æ˜¾ç¤ºæ­£ç¡®ä¸­æ–‡**
âœ… **ç”¨æˆ·ä½“éªŒä¸æ»‘æµç•…**

---

## ğŸ“… ä¿®å¤æ—¥æœŸ

- **æ—¥æœŸ**: 2025-11-03
- **ç‰ˆæœ¬**: v1.2.0
- **è´Ÿè´£äºº**: AI Assistant

---

**ç°åœ¨è¯·æ‚¨æ¸…ç†ç¼“å­˜å¹¶æµ‹è¯•ï¼Œåº”è¯¥ä¸ä¼šå†çœ‹åˆ°æ–¹å—äº†ï¼** ğŸ‰

